---
# Hammerspace Integration Role - Default Configuration
# Extended with engineering team features

# =============================================================================
# API Connection Settings
# =============================================================================
# Override these in vars/main.yml with your actual values
# hammerspace_api_host: "10.1.2.3"  # Anvil management IP
# hammerspace_api_user: "admin"
# hammerspace_api_password: "password"
hammerspace_api_validate_certs: false

# =============================================================================
# Debug Settings
# =============================================================================
hammerspace_debug: false

# =============================================================================
# Task Queue Throttling
# =============================================================================
# Prevents overwhelming the cluster with too many simultaneous operations
# When queue exceeds max_queued_tasks, wait until it drops below min_queued_tasks
hammerspace_task_queue_throttle: true
hammerspace_min_queued_tasks: 5      # Resume when queue is below this count
hammerspace_max_queued_tasks: 10     # Throttle when queue exceeds this count
hammerspace_task_queue_retries: 100  # Max retries for queue wait (100 x 10s = ~16 min)
hammerspace_task_queue_delay: 10     # Delay between retries (seconds)
hammerspace_monitor_executing_tasks: false
hammerspace_wait_for_executing: false

# =============================================================================
# Node Registration Settings
# =============================================================================
# hammerspace_node_name: "{{ inventory_hostname }}"  # Override for custom naming
# hammerspace_node_ip: "{{ ansible_default_ipv4.address }}"

# =============================================================================
# Availability Zone Mapping
# =============================================================================
# Enable to parse AZ from node name (format: "AZ1:node-name")
hammerspace_enable_az_mapping: false
hammerspace_apply_az_labels: false
hammerspace_default_az: "default"

# =============================================================================
# Volume Settings
# =============================================================================
hammerspace_add_volumes: true

# Volume threshold settings (per Tier 0 Deployment Guide)
# High threshold (utilizationThreshold): when to start evacuating data
# Value is decimal (0.98 = 98%)
hammerspace_volume_high_threshold: 0.98

# Low threshold (utilizationEvacuationThreshold): target after evacuation
# Value is decimal (0.90 = 90%)
hammerspace_volume_low_threshold: 0.90

# Volume protection settings
# onlineDelay: time in seconds before volume goes suspected (--max-suspected-time)
hammerspace_volume_online_delay: 0

# unavailableStateAvailabilityMultiplier: controls availability drop behavior
# Set to 0 to disable availability drop (--availability-drop-disabled)
# Set to 1 to enable availability drop (--availability-drop-enabled)
hammerspace_volume_unavailable_multiplier: 1

# availability: target availability level (typically 2)
hammerspace_volume_availability: 2

# durability: target durability level (typically 3)
hammerspace_volume_durability: 3

# =============================================================================
# Volume Groups
# =============================================================================
hammerspace_create_volume_groups: false
# Example volume groups configuration:
# hammerspace_volume_groups:
#   - name: "tier0-az1-volumes"
#     location_pattern: "AZ1:*"
#   - name: "tier0-az2-volumes"
#     location_pattern: "AZ2:*"

# =============================================================================
# Share Settings
# =============================================================================
hammerspace_create_shares: false
hammerspace_update_existing_shares: false

# Default export options for shares
default_share_export_options:
  - subnet: "*"
    accessPermissions: "RW"
    rootSquash: false

# =============================================================================
# Share Objectives
# =============================================================================
hammerspace_apply_share_objectives: false
# Example share objectives:
# hammerspace_share_objectives:
#   - share_name: "checkpoints"
#     objective: "availability-3-nines"
#     applicability: "TRUE"
#   - share_name: "models"
#     objective: "performance-high"
#     applicability: "TRUE"

# =============================================================================
# S3/Object Storage Integration
# =============================================================================
hammerspace_add_s3_nodes: false
hammerspace_add_object_volumes: false
hammerspace_create_s3_server: false
hammerspace_create_s3_users: false

# Example S3 node configuration:
# hammerspace_s3_nodes:
#   - name: "aws-s3-node"
#     region: "us-east-1"
#     access_key_id: "{{ vault_s3_access_key }}"
#     secret_access_key: "{{ vault_s3_secret_key }}"
#     portal_address: "s3.amazonaws.com"  # Optional, defaults to AWS

# Example object storage volumes:
# hammerspace_object_volumes:
#   - name: "s3-archive-vol"
#     node_name: "aws-s3-node"
#     bucket_name: "my-archive-bucket"
#     prefix: "hammerspace/"
#     access_type: "READ_WRITE"

# Example S3 server configuration:
# hammerspace_s3_server:
#   name: "internal-s3"
#   port: 9000
#   tls_enabled: true
#   enabled: true

# Example S3 users:
# hammerspace_s3_users:
#   - name: "app-user"
#     access_key_id: "{{ vault_app_s3_key }}"
#     secret_access_key: "{{ vault_app_s3_secret }}"
#     enabled: true

# =============================================================================
# Cluster Configuration
# =============================================================================
hammerspace_update_dns: false
hammerspace_join_ad: false
hammerspace_update_site_name: false
hammerspace_set_location: false
hammerspace_enable_prometheus: false

# Example DNS configuration:
# hammerspace_dns_config:
#   primary_server: "10.0.0.2"
#   secondary_server: "10.0.0.3"
#   search_domains:
#     - "example.com"
#     - "corp.example.com"

# Example Active Directory configuration:
# hammerspace_ad_config:
#   domain: "corp.example.com"
#   username: "{{ vault_ad_username }}"
#   password: "{{ vault_ad_password }}"
#   ou: "OU=Servers,DC=corp,DC=example,DC=com"

# Example site name configuration:
# hammerspace_site_config:
#   name: "datacenter-east"

# Example location configuration:
# hammerspace_location_config:
#   datacenter: "DC-EAST"
#   room: "Server Room A"
#   row: "R1"
#   rack: "Rack-01"
#   position: "U1"

# Example Prometheus configuration:
# hammerspace_prometheus_config:
#   port: 9100
